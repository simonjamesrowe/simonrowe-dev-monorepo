server:
  port: 8080

cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173}

uploads:
  path: ${UPLOADS_PATH:backend/uploads/}

management:
  server:
    port: 8081
  endpoints:
    web:
      exposure:
        include: health,prometheus,info
  endpoint:
    health:
      show-details: always
      show-components: always

spring:
  application:
    name: simonrowe-backend
  threads:
    virtual:
      enabled: true
  data:
    mongodb:
      uri: mongodb://localhost:27017/simonrowe
  elasticsearch:
    uris: http://localhost:9200
  kafka:
    bootstrap-servers: localhost:9092
    consumer:
      auto-offset-reset: earliest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json.trusted.packages: com.simonrowe.events
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
  mail:
    host: smtp-relay.brevo.com
    port: 587
    username: a13da4001@smtp-brevo.com
    password: ${BREVO_SMTP_PASSWORD:xxxxxx}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  ai:
    openai:
      api-key: ${GROQ_API_KEY:not-set}
      base-url: https://api.groq.com/openai
      chat:
        options:
          model: llama-3.3-70b-versatile
    mcp:
      server:
        type: SYNC
        annotation-scanner:
          enabled: true

search:
  sync:
    cron: "0 0 */4 * * *"
  site:
    max-results-per-group: 5
  blog:
    max-results: 20
  query:
    max-length: 200

contact:
  email:
    from: contact-us@simonrowe.dev
    to: simon.rowe@gmail.com
  recaptcha:
    secret-key: ${RECAPTCHA_SECRET_KEY:}
    verify-url: https://www.google.com/recaptcha/api/siteverify

chat:
  session:
    cleanup-interval-minutes: 5
    max-inactive-minutes: 30
  system-prompt: >
    You are a helpful assistant on Simon Rowe's personal portfolio website.
    You can answer questions about Simon's profile, blog posts, employment history,
    and technical skills. Use the available tools to look up accurate information.
    Be concise, friendly, and professional.

rate-limit:
  chat:
    requests-per-minute: 20
  mcp:
    requests-per-minute: 60
